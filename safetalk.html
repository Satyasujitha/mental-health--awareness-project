<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SafeTalk Support</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="top-header">
  <h1>SafeTalk ğŸ—£ï¸</h1>
  <p>You are not alone. Talking helps you feel lighter.</p>
</header>

<nav class="navbar">
  <a href="index.html">Home</a>
  <a href="tips.html">Tips</a>
  <a href="dashboard.html">Dashboard</a>
  <a href="quiz.html">Quiz</a>
</nav>

<section class="card-section">

  <!-- WHY TALKING HELPS -->
  <div class="card" style="text-align:left;">
    <h2>ğŸ’› Why talking helps</h2>
    <ul style="line-height:1.6;">
      <li>Releases stress & bottled emotions</li>
      <li>Makes you feel supported & safe</li>
      <li>Gives clarity when confused</li>
      <li>Reduces loneliness</li>
      <li>You understand yourself better</li>
    </ul>
  </div>

  <!-- WHEN TO TALK -->
  <div class="card" style="text-align:left;">
    <h2>ğŸ•’ When should you talk?</h2>
    <ul style="line-height:1.6;">
      <li>When feelings get too heavy</li>
      <li>When overthinking doesnâ€™t stop</li>
      <li>When you feel ignored or anxious</li>
      <li>When mood stays low for days</li>
      <li>When sleep/eating pattern changes</li>
    </ul>
  </div>

  <!-- ADD A TRUSTED PERSON -->
  <div class="card">
    <h2>ğŸ“ Add Someone You Trust</h2>
    <input type="text" id="name" placeholder="Name" class="input-box">
    <input type="text" id="relation" placeholder="Relation (e.g., cousin, teacher)" class="input-box">
    <input type="number" id="phone" placeholder="Phone Number" class="input-box">
    <button onclick="savePerson()">Save Contact</button>
    <p id="saveMsg"></p>
  </div>

  <!-- SHOW SAVED CONTACTS -->
  <div class="card" style="text-align:left;">
    <h2>ğŸ“‹ Saved Trusted Contacts</h2>
    <div id="contactList"></div>
  </div>

  <!-- HOW TO START TALKING -->
  <div class="card" style="text-align:left;">
    <h2>ğŸ—£ï¸ How to start a conversation</h2>
    <ul style="line-height:1.6;">
      <li>â€œIâ€™ve been feeling low lately, can I talk to you?â€</li>
      <li>â€œI need someone to listen, are you free?â€</li>
      <li>â€œI donâ€™t know whatâ€™s happening, but I need support.â€</li>
      <li>â€œCan I share whatâ€™s going on in my head?â€</li>
    </ul>
  </div>

  <!-- HELPLINE -->
  <div class="card" style="text-align:left;">
    <h2>ğŸš¨ Emergency Helpline</h2>
    <p><strong>1098</strong> - Child Helpline</p>
    <p><strong>112</strong> - National Emergency Number</p>
    <p style="font-size:0.9rem;">Use only if necessary or in unsafe situations.</p>
  </div>

</section>

<!-- BACK -->
<div class="back-container">
  <a href="tips.html"><button class="back-btn">â† Back to Tips</button></a>
</div>

<script>
function savePerson() {
  const name = document.getElementById("name").value;
  const relation = document.getElementById("relation").value;
  const phone = document.getElementById("phone").value;

  if(!name || !relation || !phone) {
    alert("Please fill all fields");
    return;
  }

  const data = JSON.parse(localStorage.getItem("trustedPersons")) || [];
  data.push({ name, relation, phone });
  localStorage.setItem("trustedPersons", JSON.stringify(data));

  document.getElementById("saveMsg").innerText = "âœ” Contact saved!";
  document.getElementById("name").value = "";
  document.getElementById("relation").value = "";
  document.getElementById("phone").value = "";

  showContacts();
}

function showContacts() {
  const listDiv = document.getElementById("contactList");
  const data = JSON.parse(localStorage.getItem("trustedPersons")) || [];

  if(data.length === 0) {
    listDiv.innerHTML = "<p>No contacts saved yet.</p>";
    return;
  }

  let html = "<ul style='padding-left:15px;'>";
  data.forEach((person, index) => {
    html += `<li>${person.name} (${person.relation}) - ${person.phone}
      <button onclick="deletePerson(${index})" style="margin-left:10px; font-size:0.8rem;">Delete</button>
    </li>`;
  });
  html += "</ul>";
  listDiv.innerHTML = html;
}

function deletePerson(index) {
  const data = JSON.parse(localStorage.getItem("trustedPersons")) || [];
  data.splice(index, 1);
  localStorage.setItem("trustedPersons", JSON.stringify(data));
  showContacts();
}

showContacts();
</script>

</body>
</html>
